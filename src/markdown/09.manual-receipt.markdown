# Nicepay API 2.0 - 영수증
- https://developers.nicepay.co.kr/receipt.php

결제가 완료된 거래에 대해 **영수증(매출전표) 또는 현금영수증**을 출력할 수 있는 API입니다.

## 🔍 조회 URL

**HTTP 요청 정보**
- **URL**: `https://npg.nicepay.co.kr/issue/IssueLoader.do`
- **Method**: GET
- **Encoding**: `euc-kr`

```
https://npg.nicepay.co.kr/issue/IssueLoader.do?type={type}&TID={TID}
```

| 파라미터 | 길이 | 필수 | 설명 |
|--------|------|------|------|
| type   | 1B  | Y | 영수증 구분(0: 일반 영수증 (카드, 계좌이체, 휴대폰 등), 1: 현금영수증 (가상계좌 등)) |
| TID    | 30B | Y | NICEPAY 거래 고유번호 |

---

## ✅ 일반 영수증 (type=0)

- **대상**: 카드결제, 계좌이체, 휴대폰결제 등
- **조회 시점**: 결제 완료 직후부터 가능
- **인증 방식**:
  - 구매자 이름 + 금액
  - 이메일
  - 카드번호 일부 등

---

## ✅ 현금영수증 (type=1)

- **대상**: 가상계좌 입금 거래
- **조회 시점**: 입금 완료 후에만 가능
- **인증 방식**:
  - 구매자 주민번호 앞자리 또는 휴대폰번호 일부
  - 현금영수증 발급 정보 필요
- **유의사항**: 현금영수증 발급이 완료된 거래에 한해 조회 가능

---

## 📂 예시

### 일반영수증 예시 (카드결제)

```
https://npg.nicepay.co.kr/issue/IssueLoader.do?type=0&TID=nicepay00m010120240101123456789
```

### 현금영수증 예시 (가상계좌)

```
https://npg.nicepay.co.kr/issue/IssueLoader.do?type=1&TID=nicepay00v010120240101123456789
```

---

## 🔐 ISMS 보안 인증 절차

모든 영수증 출력 기능은 ISMS 보안 요구사항에 따라 **본인 확인용 인증 절차**가 필요합니다:

- 구매자 이름 + 금액
- 이메일
- 카드번호 또는 주민번호 일부

---

## 처리 흐름 요약

1. 고객 또는 가맹점이 영수증 조회 URL 호출
2. 인증 페이지 노출 → 인증 정보 입력
3. 인증 성공 시 영수증(일반 또는 현금영수증) 표시 또는 다운로드
